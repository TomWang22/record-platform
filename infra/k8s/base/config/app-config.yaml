apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  NODE_ENV: development
  NEXT_PUBLIC_GATEWAY_URL: http://localhost:8080

  GATEWAY_PORT: "4000"
  AUTH_PORT: "4001"
  RECORDS_PORT: "4002"
  LISTINGS_PORT: "4003"
  ANALYTICS_PORT: "4004"
  AI_PORT: "5005"

  REDIS_URL: redis://redis.record-platform.svc.cluster.local:6379/0

  PROTO_ROOT: /app/proto

  # single source of truth
  # EXTERNAL Postgres (Docker) - Direct connection, no K8s service, persistent tuning
  # Connection from K8s pods: Use host.docker.internal (Mac) or host IP
  DATABASE_URL:         postgresql://postgres:postgres@host.docker.internal:5432/records?connect_timeout=5

  # optional compatibility (literal duplicates, not $(â€¦))
  POSTGRES_URL:         postgresql://postgres:postgres@host.docker.internal:5432/records?connect_timeout=5
  POSTGRES_URL_AUTH:    postgresql://postgres:postgres@host.docker.internal:5432/records?search_path=auth&connect_timeout=5
  POSTGRES_URL_RECORDS: postgresql://postgres:postgres@host.docker.internal:5432/records?connect_timeout=5
